<!DOCTYPE html>
<html>
<head>

<meta name='keywords' content='WebRTC, HTML5, JavaScript' />
<meta name='description' content='WebRTC Reference App' />
<meta name='viewport' content='width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1'>

<base target='_blank'>

<title>WebRTC client</title>

<!-- <link rel='stylesheet' href='css/main.css' /> -->

</head>

<body>

<div id='container'>


</div>

<script src="http://cdn.peerjs.com/0.3/peer.min.js"></script>

<script type="text/javascript">
	var global_conn;
	var peer = new Peer({key: 'is1zfbruud31sjor'});

	peer.on('open', function(id) {
  		console.log('My peer ID is: ' + id);
	});


	if (window.location.hash) {
		var other_id = window.location.hash.substr(1);
		var conn = peer.connect(other_id);

		console.log("Tryna connect to " + other_id)

		conn.on('open', function() {
			// Receive messages
			conn.on('data', function(data) {
				console.log('Received (child) ', data);
			});

			// Send messages
			conn.send('Hello!');
		});

		global_conn = conn;
	}
	else {		
		peer.on('connection', function(conn) { 
			global_conn = conn;
			console.log("GREAT SUCCESS");
			conn.on('data', function(data) {
				console.log('Received (parent) ', data);
			});
		});
	}
</script>

</body>
</html>
